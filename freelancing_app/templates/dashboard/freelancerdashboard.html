{% extends "base.html" %}
{% load static%}
{% load humanize %}

{% block title %}My Dashboard - HireMe{% endblock %}

{% block css_files %}
<link rel="stylesheet" href="{% static 'css/dashboard/freelancer/dashboard.css' %}">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section">
    <div class="container">
        <!-- Hero Content Section -->
        <div class="hero-content">
            <div class="welcome-message">
                <h2>{{ greeting }}, {{ user.username }}</h2>
                <p class="welcome-text">Here's an overview of your freelancing work</p>
            </div>
            <div class="hero-actions">
                <a href="{% url 'home:projects' %}" class="browse-projects-btn">
                    <i class="fas fa-briefcase"></i> Browse New Projects
                </a>
            </div>
        </div>
        <div class="stats-overview">
            <div class="stat-card success-card">
                <div class="stat-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="stat-info">
                    <h4>Work Performance</h4>
                    <p class="stat-number">{{ average_rating }} Average</p>
                    <p class="stat-subtext">From {{ total_completed }} completed projects</p>
                </div>
            </div>
            
            <div class="stat-card ongoing-card">
                <div class="stat-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-info">
                    <h4>Current Workload</h4>
                    <p class="stat-number">{{ active_contracts }} Active</p>
                    <p class="stat-subtext">{{ contracts_ending_this_week }} deadlines this week</p>
                    <a href="{% url 'contract:freelancer_contract_list' %}" class="stat-link">Manage projects</a>
                </div>
            </div>           
            
            <div class="stat-card proposals-card">
                <div class="stat-icon">
                    <i class="fas fa-percentage"></i>
                </div>
                <div class="stat-info">
                    <h4>Proposal Success</h4>
                    <p class="stat-number">{{ success_rate }}% Rate</p>
                    <p class="stat-subtext">{{ accepted_proposals }} proposals accepted</p>     
                    <a href="{% url 'proposal:freelancer-proposals' %}" class="stat-link">View All proposals</a>
                </div>
            </div>           
            
            <div class="stat-card earnings-card">
                <div class="stat-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-info">
                    <h4>Earnings Growth</h4>
                    <p class="stat-number">Rs {{ total_earnings|floatformat:2|intcomma }} Total</p>
                    <p class="stat-subtext">{% if earnings_growth > 0 %}+{% endif %}{{ earnings_growth }}% from last month</p>
                    <a href="{% url 'freelancer:transactions' %}" class="stat-link">View Payment History</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions Section -->
<div class="quick-actions-section">
    <div class="container">
        <!-- Quick Action Header Section -->
        <h2 class="section-title">Quick Actions</h2>
        <p class="section-subtitle">Get started with these common tasks</p>       
        <div class="quick-actions-grid">
            <div class="action-card">
                <div class="action-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h3>Find Projects</h3>
                <p>Browse new projects that match your skills and expertise</p>
                <a href="{% url 'home:projects' %}" class="action-btn">Explore</a>
            </div>           
            <div class="action-card">
                <div class="action-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <h3>My Proposals</h3>
                <p>View and manage your submitted project proposals</p>
                <a href="{% url 'proposal:freelancer-proposals' %}" class="action-btn">View</a>
            </div>            
            <div class="action-card">
                <div class="action-icon">
                    <i class="fas fa-tasks"></i>
                </div>
                <h3>Active Projects</h3>
                <p>Manage your current projects and deadlines</p>
                <a href="{% url 'contract:freelancer_contract_list' %}" class="action-btn">Manage</a>
            </div>           
            <div class="action-card">
                <div class="action-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>Earnings</h3>
                <p>Track your income and payment history</p>
                <a href="{% url 'freelancer:transactions' %}" class="action-btn">View</a>
            </div>
        </div>
    </div>
</div>

<!-- Upcoming Deadlines Section -->
<div class="deadlines-section">
    <div class="container">
        <!-- Deadlines Header Section -->
        <div class="section-header">
            <div class="text">
                <h2 class="section-title">Upcoming Deadlines</h2>
                <p class="section-subtitle">Stay on top of your important dates and projects</p>
            </div>
            <a href="{% url 'contract:freelancer_contract_list' %}" class="view-all">View All <i class="fas fa-chevron-right"></i></a>
        </div>
        {% if upcoming_contracts %}
        <!-- Deadlines Card Section -->
        <div class="deadlines-container">
            {% for contract in upcoming_contracts %}
                <div class="deadline-card">
                    <div class="deadline-date">
                        <span class="day">{{ contract.end_date|date:"d" }}</span>
                        <span class="month">{{ contract.end_date|date:"M"|upper }}</span>
                        <span class="year">{{ contract.end_date|date:"Y" }}</span>
                    </div>
                    <div class="deadline-content">
                        <div class="deadline-info">
                            <h3>{{ contract.proposal.project.title|truncatechars:30 }}</h3>
                            <div class="client-info">
                                <i class="fas fa-user-circle client-icon"></i>
                                <span class="client">{{ contract.proposal.project.client.user.full_name|default:contract.proposal.project.client.user.username }}</span>
                            </div>
                        </div>
                        <div class="deadline-footer">
                            <div class="time-left">
                                <i class="fas fa-clock"></i>
                                <span class="time-text">
                                    {% with days_left=contract.end_date|timeuntil %}
                                        {{ days_left }}
                                    {% endwith %}
                                </span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 50%"></div>
                                </div>
                                <span class="progress-text">50% completed</span>
                            </div>
                        </div>
                    </div>
                    <a href="{% url 'contract:workspace' contract.id %}" class="deadline-action" aria-label="View project details">
                        <i class="fas fa-chevron-right"></i>
                    </a>
                </div>
            {% endfor %}
        </div>
        {% else %}
            <div class="empty-deadlines">
                <div class="empty-illustration">
                    <svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                        <path d="M12 14v4"></path>
                        <path d="M8 14v4"></path>
                        <path d="M16 14v4"></path>
                    </svg>
                </div>
                <h3 class="empty-title">No Upcoming Deadlines</h3>
                <p class="empty-message">You don't have any projects with deadlines in the next 7 days.</p>
                <div class="empty-actions">
                    <a href="{% url 'home:projects' %}" class="btn-primary">
                        <i class="fas fa-search"></i> Browse Jobs
                    </a>
                    <a href="{% url 'proposal:freelancer-proposals' %}" class="btn-secondary">
                        <i class="fas fa-file-alt"></i> View Proposals
                    </a>
                </div>
                <div class="empty-tip">
                    <i class="fas fa-lightbulb"></i>
                    <span>Tip: Complete your profile to attract more clients</span>
                </div>
            </div>
        {% endif %}
    </div>
</div>

<!-- Progress Section -->
<div class="progress-section">
    <div class="container">
        <!-- Progress Header Section -->
        <div class="progress-header">
            <div class="header-content">
                <h2>Performance Dashboard</h2>
                <p class="subtitle">Track your productivity and earnings</p>
            </div>
        </div>
        <!-- Progress Card Section -->
        <div class="progress-cards">
            <div class="progress-card earnings">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Earnings</h3>
                </div>
                <div class="card-body">
                    <div class="progress-value">Rs {{ current_month_earnings|floatformat:2|intcomma }}</div>
                    <div class="progress-comparison">
                        <span class="previous-period">
                            <i class="fas fa-history"></i> Last month: Rs {{ last_month_earnings|floatformat:2|intcomma }}
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="progress-card jobs">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <h3>Projects</h3>
                </div>
                <div class="card-body">
                    <div class="progress-value">{{ active_contracts }}</div>
                    <div class="progress-comparison">
                        <span class="previous-period">
                            <i class="fas fa-history"></i> {{ contracts_ending_this_week }} deadlines this week
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="progress-card clients">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <h3>Client Satisfaction</h3>
                </div>
                <div class="card-body">
                    <div class="progress-value">{{ average_rating|floatformat:1 }}</div>
                    <div class="progress-comparison">
                        <span class="previous-period">
                            <i class="fas fa-history"></i> From {{ total_completed }} completed projects
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="progress-card ratings">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>On-Time Delivery</h3>
                </div>
                <div class="card-body">
                    <div class="progress-value">{{ on_time_percentage|floatformat:1 }}%</div>
                    <div class="progress-comparison">
                        <span class="previous-period">
                            <i class="fas fa-history"></i> Based on {{ total_completed }} completed projects
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <!-- Progress Chart Section -->
        <div class="progress-chart-container">
            <div class="chart-header">
                <h3>Monthly Earnings Trend</h3>
            </div>
            <div class="progress-chart">
                <canvas id="progressChart"></canvas>
            </div>
        </div>
    </div>
</div>

<!-- Ongoing Projects Section -->
{% comment %} <div class="ongoing-projects">
    <div class="container">
        <!-- Ongoing Projects Header Section -->
        <div class="section-header">
            <div class="header-content">
                <h2 class="section-title">My Ongoing Projects</h2>
                <p class="section-subtitle">Active projects I'm currently working on</p>
            </div>
            <div class="project-filters">
                <div class="filter-group">
                    <label for="sort-by">Sort By:</label>
                    <select id="sort-by" class="filter-select">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="price-high">Price (High to Low)</option>
                        <option value="price-low">Price (Low to High)</option>
                        <option value="due-date">Due Date</option>
                    </select>
                </div>
                <button class="filter-btn">
                    <i class="fas fa-filter"></i> Apply
                </button>
            </div>
        </div>
        <!-- Ongoing Projects Grid Section -->
        <div class="projects-grid">
            <div class="project-card">
                <div class="project-header">
                    <div class="project-status-badge ongoing">
                        <i class="fas fa-circle"></i> Ongoing
                    </div>
                    <div class="project-actions">
                        <button class="action-btn" id="project-menu-btn">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <div class="dropdown-menu">
                            <a href="#" class="menu-item"><i class="fas fa-edit"></i> Edit Project</a>
                            <a href="#" class="menu-item danger"><i class="fas fa-trash-alt"></i> Delete</a>
                        </div>
                    </div>
                </div>
                
                <div class="project-content">
                    <div class="project-meta-header">
                        <h3 class="project-title">E-commerce Website Redesign</h3>
                        <p class="project-price">Rs 25,000.00</p>
                    </div>
                    <p class="project-client">
                        <i class="fas fa-user-circle client-icon"></i> Fashion Boutique Inc.
                    </p>
                    
                    <div class="project-progress">
                        <div class="progress-info">
                            <span>Completion</span>
                            <span class="progress-percent">70%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 70%"></div>
                        </div>
                        <div class="progress-dates">
                            <span>Started: Apr 10, 2025</span>
                            <span>Due: ApMayr 15, 2025</span>
                        </div>
                    </div>
                    <div class="project-description">
                        <div class="empty-state">
                            <svg class="empty-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#a0aec0" stroke-width="1.5">
                                <path d="M3 12h18M12 3v18M7 7l10 10M7 17l10-10"></path>
                            </svg>
                            <p>No project notes added</p>
                            <small>Add your working notes about this project</small>
                        </div>
                        <ul class="project-features empty">
                        </ul>
                    </div>
                </div>
                
                <div class="project-footer">
                    <a href="#" class="btn primary-btn">
                        <i class="fas fa-tasks"></i> Manage
                    </a>
                    <a href="#" class="btn secondary-btn">
                        <i class="fas fa-external-link-alt"></i> Details
                    </a>
                </div>
            </div>
            <div class="project-card">
                <div class="project-header">
                    <div class="project-status-badge ongoing">
                        <i class="fas fa-circle"></i> Ongoing
                    </div>
                    <div class="project-actions">
                        <button class="action-btn" id="project-menu-btn">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <div class="dropdown-menu">
                            <a href="#" class="menu-item"><i class="fas fa-edit"></i> Edit Project</a>
                            <a href="#" class="menu-item danger"><i class="fas fa-trash-alt"></i> Delete</a>
                        </div>
                    </div>
                </div>
                
                <div class="project-content">
                    <div class="project-meta-header">
                        <h3 class="project-title">E-commerce Website Redesign</h3>
                        <p class="project-price">Rs 25,000.00</p>
                    </div>
                    <p class="project-client">
                        <i class="fas fa-user-circle client-icon"></i> Fashion Boutique Inc.
                    </p>
                    
                    <div class="project-progress">
                        <div class="progress-info">
                            <span>Completion</span>
                            <span class="progress-percent">70%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 70%"></div>
                        </div>
                        <div class="progress-dates">
                            <span>Started: Mar 10, 2025</span>
                            <span>Due: May 02, 2025</span>
                        </div>
                    </div>
                    
                    <div class="project-description">
                        <p class="description">Modernizing the online shopping experience with:</p>
                        <ul class="project-features">
                            <li><i class="fas fa-check-circle"></i> Responsive design</li>
                            <li><i class="fas fa-check-circle"></i> Improved product filtering</li>
                            <li><i class="fas fa-check-circle"></i> Streamlined checkout</li>
                            <li><i class="fas fa-check-circle"></i> Enhanced product pages</li>
                            <li><i class="fas fa-check-circle"></i> Mobile-first approach</li>
                            <li><i class="fas fa-check-circle"></i> Faster loading times</li>
                            <li><i class="fas fa-check-circle"></i> SEO optimization</li>
                            <li><i class="fas fa-check-circle"></i> Accessibility improvements</li>
                        </ul>
                    </div>
                </div>
                
                <div class="project-footer">
                    <a href="#" class="btn primary-btn">
                        <i class="fas fa-tasks"></i> Manage
                    </a>
                    <a href="#" class="btn secondary-btn">
                        <i class="fas fa-external-link-alt"></i> Details
                    </a>
                </div>
            </div>
        </div>
        <!-- Empty State for Ongoing Projects Section -->
        <div class="empty-projects">
            <div class="empty-illustration">
                <svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
            </div>
            <h3 class="empty-title">No Ongoing Projects</h3>
            <p class="empty-message">You don't have any ongoing projects right now.</p>
            <div class="empty-actions">
                <a href="#" class="btn primary-btn">
                    <i class="fas fa-search"></i> Browse Jobs
                </a>
                <a href="#" class="btn secondary-btn">
                    <i class="fas fa-file-alt"></i> View Proposals
                </a>
            </div>
            
            <div class="empty-tip">
                <i class="fas fa-lightbulb"></i>
                <span>Tip: Complete your profile to attract more clients</span>
            </div>
        </div>
    </div>
</div> {% endcomment %}

<!-- Recommendation Projects Section -->
{% comment %} <div class="recommended-section">
    <div class="container">
        <!-- Recommended Projects Header Section -->
        <div class="text">
            <h2 class="section-title">Recommended Projects For You</h2>
            <p class="section-subtitle">Projects matching your skills and preferences</p>
        </div>
        <!-- Recommended Projects Grid Section -->
        <div class="card-grid">
            <div class="project-card">
                <div class="project-image">
                    <img src="{% static 'images/defaultimages/defaultprojectpic.jpg' %}" alt="Project Image">
                    <div class="project-status status-active">Active</div>
                </div>
                <div class="poster-info">
                    <img class="poster-profile" src="{% static 'images/defaultimages/ronaldo.jpg' %}" alt="Profile Picture">
                    </div> 
                    <div class="poster-details">
                        <p class="poster-name">John Doe</p>
                        <p class="poster-posted-time">
                            <i class="far fa-clock"></i> Posted 2 days ago
                        </p>
                    </div>
                </div>
                <div class="project-info">
                    <div class="project-meta-header">  
                        <div class="project-category">
                            <i class="fas fa-folder"></i> Web Development
                        </div>
                        <div class="project-budget">
                            <span class="budget-amount">Rs. 20,000.00</span>
                        </div>
                    </div>
                    <h4>Website Design for a Small Business</h4>
                    <div class="project-meta">
                        <span class="proposals-count" title="Proposals Received">
                            <i class="fas fa-paper-plane"></i> 12 proposals
                        </span>
                        <span class="project-duration" title="Expected delivery timeframe">
                            <i class="far fa-clock"></i> Delivery in 2 weeks
                        </span>
                    </div>
                    <div class="project-skills">
                        <div class="skills-header">
                            <i class="fas fa-tools"></i>
                            <span class="sub-title">Key Skills</span>
                            <span class="skills-count">8 skills</span>
                        </div>
                        <div class="skills-list-container">
                            <div class="skills-list">
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    HTML/CSS
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    JavaScript
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    React
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    Node.js
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    UI/UX Design
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    Responsive Design
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    REST APIs
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    MongoDB
                                </span>
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="card-buttons">
                    <a href="#" class="apply-proposal-btn">Apply Now</a>
                    <a href="#" class="view-details-btn">View Details</a>
                </div>
            </div>  
            <div class="project-card">
                <div class="project-image">
                    <img src="{% static 'images/defaultimages/defaultprojectpic.jpg' %}" alt="Project Image">
                    <div class="project-status status-active">Active</div>
                </div>
                <div class="poster-info">
                    <div class="poster-profile-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="poster-details">
                        <p class="poster-name">John Doe</p>
                        <p class="poster-posted-time">
                            <i class="far fa-clock"></i> Posted 2 days ago
                        </p>
                    </div>
                </div>
                <div class="project-info">
                    <div class="project-meta-header">  
                        <div class="project-category">
                            <i class="fas fa-folder"></i> Web Development
                        </div>
                        <div class="project-budget">
                            <span class="budget-amount">Rs. 20,000.00</span>
                        </div>
                    </div>
                    <h4>Website Design for a Small Business</h4>
                    <div class="project-meta">
                        <span class="proposals-count" title="Proposals Received">
                            <i class="fas fa-paper-plane"></i> 12 proposals
                        </span>
                        <span class="project-duration" title="Expected delivery timeframe">
                            <i class="far fa-clock"></i> Delivery in 2 weeks
                        </span>
                    </div>
                    <div class="project-skills">
                        <div class="skills-header">
                            <i class="fas fa-tools"></i>
                            <span class="sub-title">Key Skills</span>
                            <span class="skills-count">8 skills</span>
                        </div>
                        <div class="skills-list-container">
                            <div class="skills-list">
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    HTML/CSS
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    JavaScript
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    React
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    Node.js
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    UI/UX Design
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    Responsive Design
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    REST APIs
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    MongoDB
                                </span>
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="card-buttons">
                    <a href="#" class="apply-proposal-btn">Apply Now</a>
                    <a href="#" class="view-details-btn">View Details</a>
                </div>
            </div> 
            <div class="project-card">
                <div class="project-image">
                    <img src="{% static 'images/defaultimages/defaultprojectpic.jpg' %}" alt="Project Image">
                    <div class="project-status status-active">Active</div>
                </div>
                <div class="poster-info">
                    <img class="poster-profile" src="{% static 'images/defaultimages/ronaldo.jpg' %}" alt="Profile Picture">
                    <div class="poster-details">
                        <p class="poster-name">John Doe</p>
                        <p class="poster-posted-time">
                            <i class="far fa-clock"></i> Posted 2 days ago
                        </p>
                    </div>
                </div>
                <div class="project-info">
                    <div class="project-meta-header">  
                        <div class="project-category">
                            <i class="fas fa-folder"></i> Web Development
                        </div>
                        <div class="project-budget">
                            <span class="budget-amount">Rs. 20,000.00</span>
                        </div>
                    </div>
                    <h4>Website Design for a Small Business</h4>
                    <div class="project-meta">
                        <span class="proposals-count" title="Proposals Received">
                            <i class="fas fa-paper-plane"></i> 12 proposals
                        </span>
                        <span class="project-duration" title="Expected delivery timeframe">
                            <i class="far fa-clock"></i> Delivery in 2 weeks
                        </span>
                    </div>
                    <div class="project-skills">
                        <div class="skills-header">
                            <i class="fas fa-tools"></i>
                            <span class="sub-title">Key Skills</span>
                            <span class="skills-count">8 skills</span>
                        </div>
                        <div class="skills-list-container">
                            <div class="skills-list">
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    HTML/CSS
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    JavaScript
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    React
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    Node.js
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    UI/UX Design
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    Responsive Design
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    REST APIs
                                </span>
                                <span class="skill-tag">
                                    <span class="skill-icon"><i class="fas fa-code"></i></span>
                                    MongoDB
                                </span>
                            </div>
                        </div>
                    </div>
                    
                </div>
                <div class="card-buttons">
                    <a href="#" class="apply-proposal-btn">Apply Now</a>
                    <a href="#" class="view-details-btn">View Details</a>
                </div>
            </div>     
        </div>
        <!-- Empty State for Recommended Projects Section -->
        <div class="empty-projects">
            <div class="empty-illustration">
                <svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                    <line x1="12" y1="9" x2="12" y2="13"></line>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
            </div>
            <h3 class="empty-title">No Recommended Projects Found</h3>
            <p class="empty-message">We couldn't find any projects matching your skills right now. Check back later for new opportunities.</p>
            <div class="empty-actions">
                <a href="#" class="btn-primary">
                    <i class="fas fa-search"></i> Browse All Projects
                </a>
            </div>
            <div class="empty-tip">
                <i class="fas fa-lightbulb"></i>
                <span>Tip: Update your profile skills to get better recommendations</span>
            </div>
        </div>
    </div>
</div> {% endcomment %}

<!-- Client Testimonials Section -->
<div class="testimonials-section">
    <div class="container">
        <h2 class="section-title">Client Testimonials</h2>
        <p class="section-subtitle">What your clients say about your work</p>
        <div class="testimonial-slider">
            {% if client_reviews %}
                <div class="testimonial-track">
                    {% for review in client_reviews %}
                        <div class="testimonial-slide">
                            <div class="testimonial-content">
                                <p class="testimonial-text">
                                    {% if review.feedback %}"{{ review.feedback }}"{% else %}No feedback provided.{% endif %}
                                </p>
                            </div>
                            <div class="testimonial-author">
                                <img src="{% get_media_prefix %}profile_images/{{ review.contract.proposal.project.client.user.profile_image }}" alt="{{ review.contract.proposal.project.client.user.full_name|default:review.contract.proposal.project.client.user.username }}" class="author-image">
                                <div class="author-details">
                                    <h4 class="author-name">
                                        {{ review.contract.proposal.project.client.user.full_name|default:review.contract.proposal.project.client.user.username }}
                                    </h4>
                                    <div class="rating">
                                        {% for i in "12345"|slice:":review.rating" %}
                                            <i class="fas fa-star"></i>
                                        {% endfor %}
                                        {% for i in "12345"|slice:"review.rating:" %}
                                            <i class="far fa-star"></i>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="testimonial-slide">
                    <div class="testimonial-content">
                        <p class="testimonial-text" style="color: #000; text-align: center;">No client testimonials yet.</p>
                    </div>
                </div>
            {% endif %}
            <div class="slider-nav" {% if not client_reviews or client_reviews|length < 2 %}style="display:none;"{% endif %}>
                <button id="prev-btn" class="nav-button prev">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <button id="next-btn" class="nav-button next">
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            <div class="slider-dots" {% if not client_reviews or client_reviews|length < 2 %}style="display:none;"{% endif %}></div>
        </div>
    </div>
</div>
{% endblock %}

{% block js_files %}
<script src="{% static 'js/dashboard/freelancer/project-action-toggle.js'%}"></script>
<script src="{% static 'js/dashboard/freelancer/chart.js'%}"></script>
<script src="{% static 'js/dashboard/freelancer/testimonial-slider.js'%}"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const ctx = document.getElementById('progressChart').getContext('2d');
    const months = {{ months|safe }};
    const earningsData = {{ earnings_data|safe }};
    
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: months,
            datasets: [{
                label: 'Monthly Earnings',
                data: earningsData,
                borderColor: '#4CAF50',
                backgroundColor: 'rgba(76, 175, 80, 0.1)',
                tension: 0.4,
                fill: true,
                pointBackgroundColor: '#4CAF50',
                pointBorderColor: '#fff',
                pointBorderWidth: 2,
                pointRadius: 4,
                pointHoverRadius: 6
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    padding: 12,
                    titleFont: {
                        size: 14,
                        weight: 'bold'
                    },
                    bodyFont: {
                        size: 13
                    },
                    callbacks: {
                        label: function(context) {
                            return 'Rs ' + context.raw.toLocaleString();
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(0, 0, 0, 0.1)'
                    },
                    ticks: {
                        callback: function(value) {
                            return 'Rs ' + value.toLocaleString();
                        },
                        font: {
                            size: 12
                        }
                    }
                },
                x: {
                    grid: {
                        display: false
                    },
                    ticks: {
                        font: {
                            size: 12
                        }
                    }
                }
            }
        }
    });
});
</script>
{% endblock %}
